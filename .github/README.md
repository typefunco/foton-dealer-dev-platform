# GitHub Actions CI/CD Pipeline

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —Å–±–æ—Ä–∫–∏ –∏ –¥–µ–ø–ª–æ—è –ø—Ä–æ–µ–∫—Ç–∞ Dealer Development Platform.

## üìã Workflows

### 1. **CI Pipeline** (`ci.yml`)
–û—Å–Ω–æ–≤–Ω–æ–π pipeline –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –∏ PR.

**–¢—Ä–∏–≥–≥–µ—Ä—ã:** Push –∏ PR –Ω–∞ `main`, `master`, `develop`

**Jobs:**
- ‚úÖ **Frontend Checks & Tests**
  - ESLint –ø—Ä–æ–≤–µ—Ä–∫–∞
  - TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è
  - –¢–µ—Å—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
  - –°–±–æ—Ä–∫–∞ production build
  
- ‚úÖ **Backend Checks & Tests**
  - `go vet` –ø—Ä–æ–≤–µ—Ä–∫–∞
  - `staticcheck` –∞–Ω–∞–ª–∏–∑
  - `golangci-lint` –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
  - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –∫ —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î
  - –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
  - –°–±–æ—Ä–∫–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞
  
- ‚úÖ **Docker Build Check**
  - –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤
  - –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π (Trivy)
  
- ‚úÖ **Integration Tests**
  - –ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ —Å—Ç–µ–∫–∞ —á–µ—Ä–µ–∑ docker-compose
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ health endpoints
  
- ‚úÖ **Security Scan**
  - Gosec –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  - Nancy –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 2. **CD Pipeline** (`cd.yml`)
–î–µ–ø–ª–æ–π –≤ production –ø—Ä–∏ push –≤ main –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–µ–≥–∞.

**–¢—Ä–∏–≥–≥–µ—Ä—ã:** Push –≤ `main`/`master` –∏–ª–∏ —Ç–µ–≥–∏ `v*`

**Jobs:**
- üöÄ **Build and Push Docker Images**
  - –°–±–æ—Ä–∫–∞ multi-platform –æ–±—Ä–∞–∑–æ–≤ (amd64, arm64)
  - –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ GitHub Container Registry
  - –¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≤–µ—Ä—Å–∏–∏/SHA/latest
  
- üåç **Deploy to Production**
  - –î–µ–ø–ª–æ–π –≤ production –æ–∫—Ä—É–∂–µ–Ω–∏–µ
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –¥–µ–ø–ª–æ—è

### 3. **CodeQL Analysis** (`codeql.yml`)
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞.

**–¢—Ä–∏–≥–≥–µ—Ä—ã:** Push, PR, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫)

**–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç:**
- Go –∫–æ–¥ (backend)
- JavaScript/TypeScript (frontend)

### 4. **Dependency Updates** (`dependency-update.yml`)
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

**–¢—Ä–∏–≥–≥–µ—Ä—ã:** –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫) + —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

**–û–±–Ω–æ–≤–ª—è–µ—Ç:**
- Go –º–æ–¥—É–ª–∏ (go.mod)
- NPM –ø–∞–∫–µ—Ç—ã (package.json)
- –°–æ–∑–¥–∞–µ—Ç PR —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏

### 5. **PR Checks** (`pr-checks.yml`)
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è Pull Request'–æ–≤.

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ –§–æ—Ä–º–∞—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞ PR (semantic)
- ‚úÖ –ù–∞–ª–∏—á–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è
- ‚úÖ –†–∞–∑–º–µ—Ä PR (–¥–æ–±–∞–≤–ª—è–µ—Ç –º–µ—Ç–∫–∏ size/xs-xl)
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–∏–≥—Ä–∞—Ü–∏—è—Ö

### 6. **Dependabot** (`dependabot.yml`)
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ Dependabot.

**–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç:**
- Go –º–æ–¥—É–ª–∏
- NPM –ø–∞–∫–µ—Ç—ã
- Docker –æ–±—Ä–∞–∑—ã
- GitHub Actions

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –¢—Ä–µ–±—É–µ–º—ã–µ Secrets
–î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã CD pipeline –¥–æ–±–∞–≤—å—Ç–µ –≤ GitHub Secrets:

```bash
# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –¥–µ–ø–ª–æ—è
PROD_HOST          # IP/–¥–æ–º–µ–Ω production —Å–µ—Ä–≤–µ—Ä–∞
PROD_USER          # SSH –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
PROD_SSH_KEY       # SSH –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤ `.github/workflows/ci.yml`:
- `GO_VERSION: '1.21'` - –≤–µ—Ä—Å–∏—è Go
- `NODE_VERSION: '18'` - –≤–µ—Ä—Å–∏—è Node.js

## üè∑Ô∏è Badges –¥–ª—è README

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à `README.md`:

```markdown
![CI](https://github.com/YOUR_USERNAME/dealer_dev_platform/workflows/CI%2FCD%20Pipeline/badge.svg)
![CodeQL](https://github.com/YOUR_USERNAME/dealer_dev_platform/workflows/CodeQL%20Security%20Analysis/badge.svg)
[![codecov](https://codecov.io/gh/YOUR_USERNAME/dealer_dev_platform/branch/main/graph/badge.svg)](https://codecov.io/gh/YOUR_USERNAME/dealer_dev_platform)
```

## üìä –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

### Frontend (React + TypeScript)
- ‚úÖ –õ–∏–Ω—Ç–∏–Ω–≥ (ESLint)
- ‚úÖ –¢–∏–ø—ã TypeScript
- ‚úÖ –°–±–æ—Ä–∫–∞ production build
- ‚úÖ –¢–µ—Å—Ç—ã (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏)

### Backend (Go)
- ‚úÖ `go vet` - –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ `staticcheck` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
- ‚úÖ `golangci-lint` - –ø–æ–ª–Ω—ã–π –ª–∏–Ω—Ç–∏–Ω–≥ (15+ –ª–∏–Ω—Ç–µ—Ä–æ–≤)
- ‚úÖ `gosec` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ Unit —Ç–µ—Å—Ç—ã —Å race detector
- ‚úÖ Code coverage
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- ‚úÖ –°–±–æ—Ä–∫–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞

### Docker
- ‚úÖ –£—Å–ø–µ—à–Ω–∞—è —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
- ‚úÖ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π (Trivy)
- ‚úÖ Multi-platform support (amd64, arm64)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ Docker Compose –∑–∞–ø—É—Å–∫
- ‚úÖ Health checks
- ‚úÖ –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫

**Frontend:**
```bash
cd frontend
npm ci
npm run lint
npm run build
```

**Backend:**
```bash
cd backend
go mod verify
go vet ./...
golangci-lint run
go test -race ./...
```

**Docker:**
```bash
docker-compose build
docker-compose up -d
```

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ workflow

1. –û—Ç–∫—Ä–æ–π—Ç–µ GitHub Actions –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
2. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π workflow
3. –ù–∞–∂–º–∏—Ç–µ "Run workflow"

## üìù Semantic Commit Messages

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ PR –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã:

- `feat:` - –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- `fix:` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞
- `docs:` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `style:` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `refactor:` - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- `perf:` - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- `test:` - —Ç–µ—Å—Ç—ã
- `build:` - —Å–±–æ—Ä–∫–∞
- `ci:` - CI/CD –∏–∑–º–µ–Ω–µ–Ω–∏—è
- `chore:` - —Ä—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

**–ü—Ä–∏–º–µ—Ä—ã:**
```
feat: –¥–æ–±–∞–≤–∏—Ç—å API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–ª–µ—Ä–∞
fix: –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å—á–µ—Ç –ø—Ä–∏–±—ã–ª–∏ –≤ performance
docs: –æ–±–Ω–æ–≤–∏—Ç—å README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ –¥–µ–ø–ª–æ—é
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–í—Å–µ workflows –≤–∫–ª—é—á–∞—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- CodeQL –∞–Ω–∞–ª–∏–∑
- Gosec –¥–ª—è Go –∫–æ–¥–∞
- Trivy –¥–ª—è Docker –æ–±—Ä–∞–∑–æ–≤
- Nancy –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- Dependabot –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## üí° –°–æ–≤–µ—Ç—ã

1. **–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ push:**
   ```bash
   # Backend
   cd backend && golangci-lint run && go test ./...
   
   # Frontend
   cd frontend && npm run lint && npm run build
   ```

2. **–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å CI** (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é):
   ```bash
   git commit -m "docs: update README [skip ci]"
   ```

3. **–û—Ç–ª–∞–¥–∫–∞ failed jobs:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ GitHub Actions
   - –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `act` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ Actions

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å CI/CD:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ workflow –≤ GitHub Actions
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ secrets –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏–∏ Go/Node.js
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ GitHub Actions

